FROM opensuse/leap:15.5

# Update repositories and install HAProxy
RUN zypper refresh && zypper -n install haproxy

# Copy the HAProxy configuration file into the container
COPY haproxy.cfg /etc/haproxy/haproxy.cfg

# Expose the default HTTP port (80)
EXPOSE 80

# Command to run HAProxy when the container starts
# -f specifies the config file
# -db disables background processing (useful for Docker logs)
CMD ["haproxy", "-f", "/etc/haproxy/haproxy.cfg", "-db"]